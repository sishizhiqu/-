<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="/public/css/reset.css">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
<div class="wrap">
  <!--窗口侧边栏-->
  <div class="asideBar closed">
    <!--内容区-->
    <div class="content"></div>
    <!--打开按钮-->
    <div class="pullBtn closed"></div>
    <!--中间选项列表-->
    <div class="toolList">
      <div class="item">
        <span></span>
        <i>尚品会员</i>
      </div>
      <div class="item">
        <span></span>
        <i>购物车</i>
      </div>
      <div class="item">
        <span></span>
        <i>我的关注</i>
      </div>
      <div class="item">
        <span></span>
        <i>我的足迹</i>
      </div>
      <div class="item">
        <span></span>
        <i>我的消息</i>
      </div>
      <div class="item">
        <span></span>
        <i>咨询</i>
      </div>
    </div>
    <!--回到顶部按钮-->
    <div class="backTop">
        <span></span>
        <i>回到顶部</i>
    </div>
  </div>
  <!--头部-->
  <div class="header">
    <!--头部导航-->
    <div class="top">
      <div class="topMain">
        <!--登陆注册-->
        <div class="login">
          <p>欢迎来到尚品会！请</p>
          <p class="loginBtn">
            <a href="#">登录</a>
            <a href="#">免费注册</a>
          </p>

        </div>
        <!--头部导航-->
        <div class="topNav">
          <a href="#">我的订单</a>
          <a href="#">我的购物车</a>
          <a href="#">我的尚品会</a>
          <a href="#">尚品会会员</a>
          <a href="#">企业采购</a>
          <a href="#">关注尚品会</a>
          <a href="#">合作招商</a>
          <a href="#">商家后台</a>
        </div>
      </div>

    </div>
    <div class="bottom">
      <div class="bottomMain">
        <!--logo-->
        <h1 class="logo">
          <a href="#">
            <img src="images/Logo.png" alt="logo">
          </a>
        </h1>
        <!--搜索框-->
        <div class="search">
          <input type="text">
          <button>搜索</button>
        </div>
      </div>

    </div>

  </div>
  <!--分类导航-->
  <div class="typeNav">
    <div class="typeNavMain">
      <h3>全部商品分类</h3>
      <ul>
        <li><a href="#">服装城</a></li>
        <li><a href="#">美妆馆</a></li>
        <li><a href="#">尚品会超市</a></li>
        <li><a href="#">全球购</a></li>
        <li><a href="#">闪购</a></li>
        <li><a href="#">团购</a></li>
        <li><a href="#">有趣</a></li>
        <li><a href="#">秒杀</a></li>
      </ul>
    </div>
  </div>
  <!--商品内容区-->
  <div class="main">
    <div class="mainCon">
      <!--路径面包屑导航-->
      <div class="breadcrumb">
        <!--        <a href="#">手机、数码、通讯</a>
                <i>/</i>
                <a href="#">手机</a>
                <i>/</i>
                <a href="#">Apple苹果</a>
                <i>/</i>
                <a>iphone 6S系类</a>-->
      </div>
      <!--商品区域-->
      <div class="infoWrap">
        <!--放大镜区域-->
        <div class="magnifierWrap">
          <!--放大镜-->
          <div class="magnifier">
            <!--小图容器-->
            <div class="zoomImgBox">
              <!--小图-->
              <!--              <img src="./images/s1.png" alt="图片">-->
              <!--蒙版-->
              <!--              <div class="mask"></div>-->
            </div>
            <!--大图容器-->
          </div>

          <!--缩略图-->
          <div class="thumbnail">
            <a href="javascript:;" class="prev"><</a>
            <!--图片显示区域-->
            <div class="itemWrap">
              <ul>
                <!--  <li class="items"><img src="images/s1.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s2.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s3.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s1.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s2.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s3.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s1.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s2.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s3.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s1.png" alt="缩略图"></li>
                  <li class="items"><img src="images/s1.png" alt="缩略图"></li>-->
              </ul>
            </div>
            <a href="javascript:;" class="next">></a>
          </div>
        </div>
        <!--右侧商品详情区域-->
        <div class="detailsWrap">
          <!--上部分文字区域-->
          <div class="textTop">

          </div>
          <!--下部分选择区域-->
          <div class="chooseBottom">
            <!--选择区域-->
            <div class="chooseArea">
              <!--隐藏的选择过的-->
              <div class="choosed">

              </div>
              <!--选项-->
              <!-- <dl>
                 <dt>选择颜色</dt>
                 <dd class="active">金色</dd>
                 <dd>银色</dd>
                 <dd>黑色</dd>
               </dl>
               <dl>
                 <dt>内存容量</dt>
                 <dd class="active">16G</dd>
                 <dd>64G</dd>
                 <dd>128G</dd>
                 <dd>256G</dd>
               </dl>
               <dl>
                 <dt>选择版本</dt>
                 <dd class="active">公开版</dd>
                 <dd>移动版</dd>
               </dl>
               <dl>
                 <dt>购买方式</dt>
                 <dd class="active">官方标配</dd>
                 <dd>优惠移动版</dd>
                 <dd>电信优惠版</dd>
               </dl>-->
            </div>
            <!--购物车区域-->
            <div class="cartWrap">
              <!--数量控制-->
              <div class="numCtrl">
                <input
                  onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"
                  onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"
                  type="text" value="1">
                <a href="javascript:;" class="plus">+</a>
                <a href="javascript:;" class="minus">-</a>
              </div>
              <!--加购-->
              <div class="addCart">
                <a href="javascript:;">加入购物车</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--内容详情页区域-->
      <div class="proDetailWrap">
        <!--左侧侧边栏-->
        <aside>
          <!--按钮区域-->
          <div class="tabWrap">
            <h4 class="active">相关分类</h4>
            <h4>推荐品牌</h4>
          </div>
          <!--内容区域-->
          <div class="tabContent">
            <div class="active">
              <ul class="partList">
                <li>手机</li>
                <li>手机壳</li>
                <li>内存卡</li>
                <li>Iphone配件</li>
                <li>贴膜</li>
                <li>手机耳机</li>
                <li>移动电源</li>
                <li>平板电脑</li>
              </ul>
              <ul class="goodsList">
                <li>
                  <div class="imgWrap"><img src="images/part01.png" alt="图片"></div>
                  <p class="goodsType">Apple苹果iPhone 6s (A1699)</p>
                  <p class="goodsPrice">¥6088.00</p>
                  <div class="cartBtn">
                    <a href="javascript:;">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="imgWrap"><img src="images/part02.png" alt="图片"></div>
                  <p class="goodsType">Apple苹果iPhone 6s (A1699)</p>
                  <p class="goodsPrice">¥6088.00</p>
                  <div class="cartBtn">
                    <a href="javascript:;">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="imgWrap"><img src="images/part03.png" alt="图片"></div>
                  <p class="goodsType">Apple苹果iPhone 6s (A1699)</p>
                  <p class="goodsPrice">¥6088.00</p>
                  <div class="cartBtn">
                    <a href="javascript:;">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="imgWrap"><img src="images/part01.png" alt="图片"></div>
                  <p class="goodsType">Apple苹果iPhone 6s (A1699)</p>
                  <p class="goodsPrice">¥6088.00</p>
                  <div class="cartBtn">
                    <a href="javascript:;">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="imgWrap"><img src="images/part02.png" alt="图片"></div>
                  <p class="goodsType">Apple苹果iPhone 6s (A1699)</p>
                  <p class="goodsPrice">¥6088.00</p>
                  <div class="cartBtn">
                    <a href="javascript:;">加入购物车</a>
                  </div>
                </li>
              </ul>
            </div>
            <div>推荐品牌</div>
          </div>
        </aside>
        <!--详情区-->
        <div class="proDetail">
          <!--选择搭配-->
          <div class="fitting">
            <h4>选择搭配</h4>
            <div class="goodsSet">
              <div class="master">
                <img src="images/l-m01.png" alt="图片">
                <p>¥5299</p>
                <i>+</i>
              </div>
              <div class="suits">
                <div class="item">
                  <img src="images/dp01.png" alt="图片">
                  <p>Feless费勒斯VR</p>
                  <lable>
                    <input type="checkbox" value="39">
                    <span>39</span>
                  </lable>
                </div>
                <div class="item">
                  <img src="images/dp02.png" alt="图片">
                  <p>Feless费勒斯VR</p>
                  <lable>
                    <input type="checkbox" value="50">
                    <span>50</span>
                  </lable>
                </div>
                <div class="item">
                  <img src="images/dp03.png" alt="图片">
                  <p>Feless费勒斯VR</p>
                  <lable>
                    <input type="checkbox" value="59">
                    <span>59</span>
                  </lable>
                </div>
                <div class="item">
                  <img src="images/dp04.png" alt="图片">
                  <p>Feless费勒斯VR</p>
                  <lable>
                    <input type="checkbox" value="99">
                    <span>99</span>
                  </lable>
                </div>
              </div>
              <div class="result">
                <p>已选购<i>0</i>件商品</p>
                <p>套餐价</p>
                <p class="packPrice">¥5299</p>
                <button class="addCart">加入购物车</button>
              </div>
            </div>
          </div>
          <!--商品详情-->
          <div class="proIntro">
            <ul class="tabTitle">
              <li class="active"><a href="javascript:;">商品介绍</a></li>
              <li><a href="javascript:;">规格与包装</a></li>
              <li><a href="javascript:;">售后保障</a></li>
              <li><a href="javascript:;">商品评价</a></li>
              <li><a href="javascript:;">手机社区</a></li>
            </ul>
            <ul class="tabPanel">
              <li class="active">
                <ul class="goods-intro">
                  <li>分辨率：1920*1080(FHD)</li>
                  <li>后置摄像头：1200万像素</li>
                  <li>前置摄像头：500万像素</li>
                  <li>核 数：其他</li>
                  <li>频 率：以官网信息为准</li>
                  <li>品牌： Apple</li>
                  <li>商品名称：APPLEiPhone 6s Plus</li>
                  <li>商品编号：1861098</li>
                  <li>商品产地：中国大陆</li>
                  <li>商品毛重：0.51kg</li>
                  <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                  <li>系统：苹果（IOS）</li>
                  <li>像素：1000-1600万品毛重：0.51kg</li>
                  <li>机身内存：64GB</li>
                </ul>
                <div class="goods-intro-img">
                  <img src="images/intro01.png" alt="详情页">
                  <img src="images/intro02.png" alt="详情页">
                  <img src="images/intro03.png" alt="详情页">
                </div>
              </li>
              <li>规格与包装</li>
              <li>售后保障</li>
              <li>商品评价</li>
              <li>手机社区</li>
            </ul>
          </div>
        </div>
      </div>
      <!--猜你喜欢-->
      <div class="guessLike">
        <h4>猜你喜欢</h4>
        <div class="proLike">
          <div class="item">
            <img src="images/itemlike01.png" alt="">
            <div>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</div>
            <p>¥ 3699.00</p>
            <i>已有6人评价</i>
          </div>
          <div class="item">
            <img src="images/itemlike02.png" alt="">
            <div>Apple苹果iPhone 6s/6s Plus 16G 64G 128G</div>
            <p>¥ 4388.00</p>
            <i>已有700人评价</i>
          </div>
          <div class="item">
            <img src="images/itemlike03.png" alt="">
            <div>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</div>
            <p>¥ 4088.00</p>
            <i>已有700人评价</i>
          </div>
          <div class="item">
            <img src="images/itemlike04.png" alt="">
            <div>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</div>
            <p>¥ 4088.00</p>
            <i>已有700人评价</i>
          </div>
          <div class="item">
            <img src="images/itemlike05.png" alt="">
            <div>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</div>
            <p>¥ 4088.00</p>
            <i>已有700人评价</i>
          </div>
          <div class="item">
            <img src="images/itemlike06.png" alt="">
            <div>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</div>
            <p>¥ 4088.00</p>
            <i>已有700人评价</i>
          </div>
        </div>
      </div>


    </div>
  </div>
  <!--footer-->
  <footer>
    <div class="footerWrap">
      <div class="top">
        <dl>
          <dt>购物指南</dt>
          <dd>购物流程</dd>
          <dd>会员介绍</dd>
          <dd>生活旅行/团购</dd>
          <dd>常见问题</dd>
          <dd>购物指南</dd>
        </dl>
        <dl>
          <dt>配送方式</dt>
          <dd>上门自提</dd>
          <dd>211限时达</dd>
          <dd>配送服务查询</dd>
          <dd>配送费收取标准</dd>
          <dd>海外配送</dd>
        </dl>
        <dl>
          <dt>支付方式</dt>
          <dd>货到付款</dd>
          <dd>在线支付</dd>
          <dd>分期付款</dd>
          <dd>邮局汇款</dd>
          <dd>公司转账</dd>
        </dl>
        <dl>
          <dt>售后服务</dt>
          <dd>售后政策</dd>
          <dd>价格保护</dd>
          <dd>退款说明</dd>
          <dd>返修/退换货</dd>
          <dd>取消订单</dd>
        </dl>
        <dl>
          <dt>特色服务</dt>
          <dd>夺宝岛</dd>
          <dd>DIY装机</dd>
          <dd>延保服务</dd>
          <dd>尚品汇E卡</dd>
          <dd>尚品汇通信</dd>
        </dl>
        <dl>
          <dt>帮助中心</dt>
          <dd>
            <img src="images/wx_cz.jpg" alt="">
          </dd>

        </dl>
      </div>
      <div class="bottom">
        <ul>
          <li>关于我们</li>
          <li>联系我们</li>
          <li>关于我们</li>
          <li>商家入驻</li>
          <li>营销中心</li>
          <li>友情链接</li>
          <li>关于我们</li>
          <li>营销中心</li>
          <li>友情链接</li>
          <li>关于我们</li>
        </ul>
        <p>地址：北京市昌平区宏福科技园综合楼6层</p>
        <p>京ICP备19006430号</p>
      </div>
    </div>
  </footer>


</div>
<script src="js/data.js"></script>
<script>
  window.onload = function () {
    //获取当前图片数据的索引
    let currentIndex = 0;


    breadCrumb();

    //动态渲染面包屑导航
    function breadCrumb() {
      //路径导航的父容器
      let crumbNode = document.getElementsByClassName('breadcrumb')[0]
      //获取数据
      var path = goodData.path;
      for (let i = 0; i < path.length; i++) {
        //数组长度多少，就创建多少个a标签
        let aNode = document.createElement('a');
        //判断是否是最后一个路径
        if (i === path.length - 1) {
          aNode.innerHTML = path[i].title;
          crumbNode.appendChild(aNode);
        } else {
          //不是最后一个，设置文本，href属性
          aNode.innerHTML = path[i].title;
          aNode.href = path[i].url;
          crumbNode.appendChild(aNode);
          let iNode = document.createElement('i');
          iNode.innerHTML = '/';
          crumbNode.appendChild(iNode);
        }
      }
    }

    magnifier();

    //放大镜
    function magnifier() {
      //获取放大镜父容器
      let magnifierNode = document.querySelector('.wrap .main .mainCon .infoWrap .magnifierWrap .magnifier');
      //小图容器
      let zoomImgBoxNode = document.querySelector('.wrap .main .mainCon .infoWrap .magnifierWrap .zoomImgBox');
      //小图动态渲染
      let smallImg = document.createElement('img');
      //小图默认使用图片数据的第一张
      smallImg.src = goodData.imagessrc[0].s;
      zoomImgBoxNode.appendChild(smallImg);
      //给蒙版初始化
      let maskNode = null;
      //给大图容器初始化
      let bigImgBox = null;
      //给大图初始化
      let bigImg = null;


      //当鼠标进入小图容器时 创建蒙版 创建大图容器 大图

      zoomImgBoxNode.addEventListener('mouseenter', function () {
        if (!maskNode) {
          //创建蒙版
          maskNode = document.createElement('div');
          maskNode.classList.add('mask');
          zoomImgBoxNode.appendChild(maskNode);
          //创建大图容器
          bigImgBox = document.createElement('div');
          bigImgBox.classList.add('bigImgBox');
          magnifierNode.appendChild(bigImgBox);
          //创建大图
          bigImg = document.createElement('img');
          bigImg.src = goodData.imagessrc[currentIndex].b;
          bigImgBox.appendChild(bigImg);
        }

        //当鼠标在内部移动时，设置蒙版跟随，大图移动
        zoomImgBoxNode.onmousemove = function (event) {
          //兼容IE
          //高版本浏览器会将事件对象作为回调函数的第一个形参传递给我们使用
          //低版本浏览器是将事件对象作为window的一个属性存在的
          event = event || window.event;

          //获取蒙版移动的距离
          //鼠标距离视口左侧的值 - 父容器距离视口左侧的值 - 蒙版元素宽度的一半
          let maskPosition = {
            left: event.clientX - zoomImgBoxNode.getBoundingClientRect().left - maskNode.offsetWidth / 2,
            top: event.clientY - zoomImgBoxNode.getBoundingClientRect().top - maskNode.offsetHeight / 2
          }

          //判断left和top距离是否超出边界
          if (maskPosition.left < 0) {
            maskPosition.left = 0;
          }
          if (maskPosition.top < 0) {
            maskPosition.top = 0;
          }
          if (maskPosition.left > zoomImgBoxNode.clientWidth - maskNode.offsetWidth) {
            maskPosition.left = zoomImgBoxNode.clientWidth - maskNode.offsetWidth;
          }
          if (maskPosition.top > zoomImgBoxNode.clientHeight - maskNode.offsetHeight) {
            maskPosition.top = zoomImgBoxNode.clientHeight - maskNode.offsetHeight;
          }

          //设置蒙版的位置
          maskNode.style.left = maskPosition.left + 'px';
          maskNode.style.top = maskPosition.top + 'px';


          //移动大图, 移动方向和蒙版方向相反
          //   蒙版可移动空间            大图可移动空间
          //  -----------     =     --------------
          //  蒙版移动距离             大图移动距离

          //注意scale 是负值，因为大图容器比大图小
          let scale = (zoomImgBoxNode.clientWidth - maskNode.offsetWidth) / (bigImgBox.clientWidth - bigImg.offsetWidth)
          let bigImgPosition = {
            left: maskPosition.left / scale,
            top: maskPosition.top / scale
          }
          //移动大图
          bigImg.style.marginLeft = bigImgPosition.left + 'px';
          bigImg.style.marginTop = bigImgPosition.top + 'px';
        }

        //当 鼠标移出，蒙版删除， 移动和移出事件设置为null，大图容器和大图删除
        zoomImgBoxNode.onmouseleave = function () {
          //移出节点
          zoomImgBoxNode.removeChild(maskNode);
          magnifierNode.removeChild(bigImgBox);

          //leave和move事件设置为null
          zoomImgBoxNode.onmousemove = null;
          zoomImgBoxNode.onmouseleave = null;

          //恢复初始化
          maskNode = null;
          bigImgBox = null;
          bigImg = null;
        }
      })
    }

    thumbnail();

    //缩略图移动和单机切换
    function thumbnail() {
      //获取图片容器
      let list = document.querySelector('.wrap .main .mainCon .infoWrap .thumbnail .itemWrap ul')

      /*
      * 缩略图的动态渲染
      *
      * */
      // 获取图片数据
      let imagesSrc = goodData.imagessrc;
      //将图片数据添渲染到页面里
      imagesSrc.forEach(function (item, index) {
        //当前这个数组有多少个元素就要创建多少个li，并添加一张图片，图片的链接就是每个对象的s属性的值
        let liNode = document.createElement('li');
        let imgNode = document.createElement('img');
        imgNode.src = item.s;
        liNode.appendChild(imgNode);
        list.appendChild(liNode);

      })


      //获取图片集合
      let items = list.getElementsByTagName('li');


      //获取左右按钮
      let prevNode = document.querySelector('.wrap .main .mainCon .infoWrap .thumbnail a.prev');
      let nextNode = document.querySelector('.wrap .main .mainCon .infoWrap .thumbnail a.next');
      /*
      * 缩略图的移动功能
      *
      * */
      //每次移动两张小图,计算单次的偏移量
      //显示图片的张数 * （图片的宽 + margin-right）
      let moveNum = 2;    //定义每次移动的张数
      let moveStep = (items[0].offsetWidth + 20) * moveNum;    //每次移动的距离
      //计算一共可以移动的距离， (总张数-显示张数) * (图片宽 + marginright)
      //需要定义一个变量 记录已经移动的距离
      //总距离 - 已经移动的距离 = 剩余距离
      //每一次移动，都要比较剩余距离够不够走
      let showNum = 5;   //显示的张数
      let totalLen = (items.length - showNum) * (items[0].offsetWidth + 20);  //总共可移动空间
      let moveLen = 0;  //定义已经移动的距离
      let surplusLen = totalLen - moveLen;   //剩余可走的距离
      //给next按钮绑定单击事件
      nextNode.onclick = function () {
        //判断剩余距离是否大于0
        if (surplusLen > 0) {
          //如果剩余距离大于步长
          if (surplusLen >= moveStep) {
            //已经移动距离要加步长
            moveLen += moveStep;
            //剩余距离要更新
            surplusLen -= moveStep;
          } else {
            //说明剩余空间不够一个步长，则剩余距离为0，移动距离为总的剩余距离
            surplusLen = 0;
            moveLen = totalLen;
          }
          list.style.left = -moveLen + 'px';
        }
      }
      //给prev按钮绑定事件
      prevNode.onclick = function () {
        //单击一下prev往前走，就等于现在的next已经到达的定位，往前走一个步长，定位就是少一个步长
        //prev可移动距离就是next已经移动的距离
        //判断剩余距离是否大于0
        if (moveLen > 0) {
          //如果剩余距离大于等于步长
          if (moveLen >= moveStep) {
            //定位的位置就减去一个步长
            moveLen -= moveStep;
            surplusLen += moveStep;
          } else {
            //说明剩余空间不够一个步长，则剩余距离为0，定位也为0；
            moveLen = 0;
            surplusLen = totalLen - moveLen;
          }
          list.style.left = -moveLen + 'px';
        }
      }


    }


    thumbnailClick();

    //缩略图点击功能
    function thumbnailClick() {
      //获取缩略图中li的集合
      let list = document.querySelector('.wrap .main .mainCon .infoWrap .thumbnail .itemWrap ul')
      let items = list.getElementsByTagName('li');
      //获取小图
      let smallImg = document.querySelector('.wrap .main .mainCon .infoWrap .magnifierWrap .magnifier .zoomImgBox img');
      for (let i = 0; i < items.length; i++) {
        items[i].onclick = function () {
          smallImg.src = goodData.imagessrc[i].s;
          currentIndex = i;
        }

      }
    }

    detailCon();

    //动态渲染商品详情上半部分文字区域
    function detailCon() {
      //获取详情信息内容
      let goodsDetail = goodData.goodsDetail;
      //获取商品详情上半部分文字区域节点
      let detailTextTop = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop');

      /*//获取标题节点
      let titleNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop h3');
      //获取推荐节点
      let recommendNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop p');
      //获取价格节点
      let priceNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .priceWrap .priceTop .price > em');
      //获取促销类型
      let promoteType = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .priceWrap .promotionBottom .promotionInfo > i');
      //获取促销内容
      let promoteContent = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .priceWrap .promotionBottom .promotionInfo > em');

      //获取累计评价
      let evaluateNum = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .priceWrap .priceTop .remark > span');
      //获取支持内容
      let support = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .supportWrap .area:first-child em');
      //获取地址信息
      let address = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .supportWrap .area:last-child em');

      //渲染
      titleNode.innerHTML = goodsDetail.title;
      recommendNode.innerHTML = goodsDetail.recommend;
      priceNode.innerHTML = goodsDetail.price;
      promoteType.innerHTML = goodsDetail.promoteSales.type;
      promoteContent.innerHTML = goodsDetail.promoteSales.content;
      evaluateNum.innerHTML = goodsDetail.evaluateNum;
      support.innerHTML = goodsDetail.support;
      address.innerHTML = goodsDetail.address;*/

      let str = `<h3>${goodsDetail.title}</h3>
            <p>${goodsDetail.recommend}</p>
            <!--价格区域-->
            <div class="priceWrap">
              <div class="priceTop">
                <span>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</span>
                <div class="price">
                  <span>¥</span>
                  <em>${goodsDetail.price}</em>
                  <i>降价通知</i>
                </div>
                <div class="remark">
                  <i>累计评价</i>
                  <span>${goodsDetail.evaluateNum}</span>
                </div>
              </div>
              <div class="promotionBottom">
                <span>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</span>
                <div class="promotionInfo">
                  <i>${goodsDetail.promoteSales.type}</i>
                  <em>${goodsDetail.promoteSales.content}</em>
                </div>
              </div>
            </div>
            <!--支持区域-->
            <div class="supportWrap">
              <!--支持-->
              <div class="area">
                <span>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</span>
                <em>${goodsDetail.support}</em>
              </div>
              <!--地址-->
              <div class="area">
                <span>配&nbsp;送&nbsp;至</span>
                <em>${goodsDetail.address}</em>
              </div>
            </div>`

      detailTextTop.innerHTML = str;

    }


    chooseArea();

    //选择区域逻辑
    function chooseArea() {
      /*
      *   选项的动态渲染
      *
      * */
      //获取选项的数据
      let crumbData = goodData.goodsDetail.crumbData;
      //crumbData的长度就是要多少个dl
      //获取选择区域
      let chooseWrap = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .chooseArea');
      //获取mark标签父元素
      let choosedNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .chooseArea .choosed');
      //获取价格
      let priceNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .textTop .priceWrap .priceTop .price > em');
      //获取数量节点
      let qualityNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .cartWrap .numCtrl input');
      //定义一个变量存放数量，获取初始数量
      let quality = parseInt(qualityNode.value);


      //遍历数组
      for (let i = 0; i < crumbData.length; i++) {
        //创建dl
        let dlNode = document.createElement('dl');
        //一个dl就有一个dt，创建dt
        let dtNode = document.createElement('dt');
        dtNode.innerHTML = crumbData[i].title;
        dlNode.appendChild(dtNode);


        //给dl添加选项
        //遍历crumbData[i]的data属性值
        crumbData[i].data.forEach(function (item, index) {
          //创建dd
          let ddNode = document.createElement('dd');
          ddNode.innerHTML = item.type;
          //给选项设置自定义属性changePrice，之后用来改变价格
          ddNode.setAttribute('changePrice', item.changePrice);
          dlNode.appendChild(ddNode);
        })

        chooseWrap.appendChild(dlNode);

      }


      /*
      *   实现选项的动态功能
      *   1. 单击高亮显示
      *   2. 单击选项后，上方出现mark标签
      *   3. 单击x， mark标签删除，高亮初始化
      *   4. 价格计算
      * */

      //获取dlList
      let dlList = document.querySelectorAll('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .chooseArea > dl');

      //定义一个对象数组，来存储四组选项的index，文本内容，和changePrice属性，
      let indexArr = [];
      //数组初始化
      for (let i = 0; i < dlList.length; i++) {
        let obj = {'index': 0, 'content': '', changePrice: 0};
        indexArr.push(obj);
      }

      //遍历dlList
      for (let i = 0; i < dlList.length; i++) {

        //获取dd
        let ddList = dlList[i].getElementsByTagName('dd');
        //给dd初始化class=active
        ddList[0].classList.add('active');
        //遍历dd，给每一个dd绑定单击事件
        //设置选项单击事件，点击后选中，1.获取索引，给索引添加class=active属性 2.创建mark 3.更改价格
        for (let j = 0; j < ddList.length; j++) {
          ddList[j].onclick = function () {

            /*
            *    实现单击高亮
            * */
            //移除之前记录的索引的class=avtive属性
            ddList[indexArr[i].index].classList.remove('active');
            //将索引和对应的值存储到对应的数组对象里
            indexArr[i].index = j;
            indexArr[i].content = this.innerHTML;
            indexArr[i].changePrice = parseInt(this.getAttribute('changePrice'));

            //添加class=active属性
            ddList[indexArr[i].index].classList.add('active');

            /*
            *  实现单击创建mark标签
            *
            * */

            //清空里面所有元素
            choosedNode.innerHTML = '';
            //遍历索引，根据索引创建4个mark标签
            indexArr.forEach(function (item, index) {
              if (item.content) {
                //创建mark标签
                let markNode = document.createElement('mark');
                markNode.innerHTML = item.content;
                //创建a标签
                let aNode = document.createElement('a');
                aNode.href = "javascript:;";
                aNode.innerHTML = 'X';
                //给anode添加当前是第几个a
                aNode.setAttribute('num', index);
                markNode.appendChild(aNode);
                choosedNode.appendChild(markNode);
              }
            })

            //更改价格
            changePrice(indexArr);

            /*
               *  点击X 删除mark标签
               *
              * */
            //获取mark a标签
            let delANodes = choosedNode.getElementsByTagName('a');
            //遍历a标签
            for (let k = 0; k < delANodes.length; k++) {
              //绑定单击事件
              delANodes[k].onclick = function () {
                //删除当前的mark标签
                this.parentNode.parentNode.removeChild(this.parentNode);
                //当前的选项class=active取消
                //获取当前是数组的第几个对象，也就是第几个dl
                let num = parseInt(this.getAttribute('num'));
                //获取当前要改变的的ddlist
                let currentDdList = dlList[num].getElementsByTagName('dd');
                currentDdList[indexArr[num].index].classList.remove('active');
                //当前索引数组对象的index变为0
                indexArr[num].index = 0;
                indexArr[num].content = '';
                indexArr[num].changePrice = 0;
                //class=active变为第一个
                currentDdList[indexArr[num].index].classList.add('active');
                //价格更改
                changePrice(indexArr);

              }
            }

          }

        }
      }


      /*
      *  商品数量发生改变，价格发生改变
      *
      * */
      //给input添加change事件
      let proNumNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .cartWrap .numCtrl input');
      proNumNode.onchange = function () {
        quality = parseInt(proNumNode.value);
        changePrice(indexArr);
      }

      /*
      *  商品数量右边的正负号，可以控制数量加减
      *
      * */
      let plusNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .cartWrap .numCtrl > a.plus');
      let minusNode = document.querySelector('.wrap .main .mainCon .infoWrap .detailsWrap .chooseBottom .cartWrap .numCtrl > a.minus');
      plusNode.onclick = function () {
        quality++;
        proNumNode.value = quality;
        changePrice(indexArr);
      }
      minusNode.onclick = function () {
        if (quality > 1) {
          quality--;
        } else {
          quality = 1;
        }
        proNumNode.value = quality;
        changePrice(indexArr);
      }


      //价钱更改函数
      function changePrice(arr) {
        //定义一个初始价格
        let newPrice = goodData.goodsDetail.price * quality;
        //更改价格
        arr.forEach(function (item, index) {
          newPrice += item.changePrice * quality;
        })
        //修改商品详情价格
        priceNode.innerHTML = newPrice;

        //获取套餐价元素
        let totalPriceNode = document.querySelector('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .result .packPrice');
        //获取可以搭配的总元素列表
        let fittingOptions = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .suits .item lable input');
        //获取商品价格元素
        let proPriceNode = document.querySelector('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .master p');
        proPriceNode.innerHTML = '¥' + newPrice;

        //每一次选择结果变了。价格改变，都要遍历一次复选框，给套餐价计算
        for (let j = 0; j < fittingOptions.length; j++) {
          //判断是否选中
          if (fittingOptions[j].checked) {
            newPrice += parseInt(fittingOptions[j].value);
          }
        }
        totalPriceNode.innerHTML = '¥' + newPrice;

      }


    }


    asideTab();
    proDetailsTab();
    //panel切换
    /*   function asideTab(){
         //获取按钮集合
         let tabBtn = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap aside .tabWrap h4');
         //获取内容区集合
         let tabContent = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap aside .tabContent > div');
         //定义一个变量用来存储当前索引
         let curShowIndex = 0;
         //单击按钮后，获取对应的内容区的索引，给按钮区以及内容区添加class=active
         for(let i=0;i<tabBtn.length;i++){
           tabBtn[i].index = i;
           tabBtn[i].onclick = function(){
             tabBtn[curShowIndex].classList.remove('active');
             tabContent[curShowIndex].classList.remove('active');
             curShowIndex = this.index;
             this.classList.add('active');
             tabContent[curShowIndex].classList.add('active');
           }
         }
       }*/
    function asideTab() {
      //获取按钮集合
      let tabBtn = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap aside .tabWrap h4');
      //获取内容区集合
      let tabContent = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap aside .tabContent > div');
      let tab1 = new Tab(tabBtn, tabContent);
    }

    function proDetailsTab() {
      let tabBtn = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap .proDetail .proIntro .tabTitle li');
      let tabContent = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap .proDetail .proIntro .tabPanel >li');
      let tab2 = new Tab(tabBtn, tabContent);
    }

    //tab切换构造函数
    function Tab(tabBtn, tabContent) {
      this.tabBtn = tabBtn;
      this.tabContent = tabContent;
      this.curShowIndex = 0;
      //提前在外部将实例对象的this保存起来，为了在回调函数中this被占用时，所使用
      let _this = this;
      //绑定单击事件
      for (let i = 0; i < this.tabBtn.length; i++) {
        this.tabBtn[i].index = i;
        //绑定事件
        this.tabBtn[i].onclick = function () {
          //回调函数的作用域中，有自己的this，指向当前事件源，而实例化对象的this需要在外部先用变量保存起来
          _this.tabClick(this);
        }

      }
    }

    //Tab的原型方法
    Tab.prototype.tabClick = function (btn) {
      this.tabBtn[this.curShowIndex].classList.remove('active');
      this.tabContent[this.curShowIndex].classList.remove('active');
      this.curShowIndex = btn.index;
      btn.classList.add('active');
      this.tabContent[this.curShowIndex].classList.add('active');

    }


    fittingPrice();

    //选择搭配价钱
    function fittingPrice() {
      //获取商品件数元素
      let fittingNumNode = document.querySelector('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .result p i');
      //获取套餐价元素
      let totalPriceNode = document.querySelector('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .result .packPrice');
      //获取可以搭配的总元素列表
      let fittingOptions = document.querySelectorAll('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .suits .item lable input');
      //绑定onchange事件
      for (let i = 0; i < fittingOptions.length; i++) {
        fittingOptions[i].onchange = function () {
          //获取商品价格元素
          let proPriceNode = document.querySelector('.wrap .main .mainCon .proDetailWrap .proDetail .fitting .goodsSet .master p');
          //获取价格
          let proPrice = parseInt(proPriceNode.innerHTML.substr(1));
          //计数
          let num = 0;
          //遍历所有的复选框
          for (let j = 0; j < fittingOptions.length; j++) {
            //判断是否选中
            if (fittingOptions[j].checked) {
              proPrice += parseInt(fittingOptions[j].value);
              num++;
            }
          }
          //改变套餐价元素的值
          totalPriceNode.innerHTML = '¥' + proPrice;
          //改变商品数量
          fittingNumNode.innerHTML = num;
        }
      }
    }


    asideOpen();
    //窗口侧边栏收缩
    function asideOpen(){
      let openBtnNode = document.querySelector('.wrap .asideBar .pullBtn');
      let asideBarNode = document.querySelector('.wrap .asideBar')
      let toolItemList = document.querySelectorAll('.wrap .asideBar .toolList .item');

      //绑定打开按钮单击事件
      openBtnNode.onclick = function(){
        if(openBtnNode.classList.contains('closed')){
          openBtnNode.classList.replace('closed','opened');
          asideBarNode.classList.replace('closed','opened');
        }else{
          openBtnNode.classList.replace('opened','closed');
          asideBarNode.classList.replace('opened','closed');
        }
      }

      //遍历中间工具列表
      for(let i=0;i<toolItemList.length;i++){
        //绑定焦点事件
        toolItemList[i].onmouseover = function(){
          this.firstElementChild.classList.add('hover');
          this.lastElementChild.classList.add('hover');

        }
        toolItemList[i].onmouseout = function(){
          this.firstElementChild.classList.remove('hover');
          this.lastElementChild.classList.remove('hover');
        }
      }

      //回到顶部按钮
      let backTopBtn = document.querySelector('.wrap .asideBar .backTop');
      backTopBtn.onmouseover= function(){
        this.firstElementChild.classList.add('hover');
        this.lastElementChild.classList.add('hover');
      }
      backTopBtn.onmouseout = function(){
        this.firstElementChild.classList.remove('hover');
        this.lastElementChild.classList.remove('hover');
      }
      backTopBtn.onclick = function(){
        document.documentElement.scrollTop = 0;
      }

    }

  }

</script>
</body>
</html>